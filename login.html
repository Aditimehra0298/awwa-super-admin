<!DOCTYPE html>
<html lang="en">
<head>
    <!--
    ===========================================
    AWWA FAMILY MANAGEMENT SYSTEM - LOGIN PAGE
    ===========================================
    
    PURPOSE: Main authentication portal for the AWWA Family Management System
    TARGET USERS: Military personnel and family members of 624 EME BN
    FEATURES: 
    - Multi-role authentication (L1-L4, admin)
    - Hindi branding with "दीप" (Deep) theme
    - Responsive design for all devices
    - Animated background with screenshot collages
    - Pre-configured test credentials for different user types
    
    DEPENDENCIES:
    - styles.css: Custom styling for login page
    - Font Awesome: Icons
    - Google Fonts: Inter and Poppins fonts
    - public/ folder: Images and assets
    
    NAVIGATION FLOW:
    login.html → dashboard_integrated.html (main dashboard)
    login.html → dashboard_super user.html (enhanced dashboard)
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AWWA - Sign In</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Top header with logo (left corner) -->
    <header class="site-header">
        <img src="public/Awwa2-logo.png" alt="AWWA" class="header-logo">
    </header>
    <div class="container">
        <div class="login-card">
            <!-- Left Column - Photo Collage -->
            <div class="photo-section">
                <div class="photo-collage">
                    <img src="public/Untitled design (26).png" alt="Women's Community Photos" class="main-image">
                </div>
            </div>

            <!-- Right Column - Login Form -->
            <div class="form-section">
                <div class="form-container">
                    <!-- Logo and Header -->
                    <div class="header">
                        <div class="project-badge">
                            <span class="badge-text">PROJECT</span>
                            
                        </div>
                        <div class="hindi-hero">
                            <div class="hindi-title">दीप <img src="public/Untitled design (25).png" alt="दीप" class="diya-icon"></div>
                            <div class="hindi-sub">☼ जागरूकता से आत्मनिर्भरता ☼</div>
                        </div>
                        <p class="subtitle">Please sign in to continue</p>
                    </div>

                    <!-- Login Form -->
                    <form class="login-form">
                        <div class="form-group">
                            <label for="userId">User ID</label>
                            <div class="input-container">
                                <i class="fas fa-user input-icon"></i>
                                <input type="text" id="userId" name="userId" value="tarunpreet singh" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="password">Password</label>
                            <div class="input-container">
                                <i class="fas fa-lock input-icon"></i>
                                <input type="password" id="password" name="password" value="admin123" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="userType">User Type</label>
                            <div class="input-container">
                                <i class="fas fa-shield-alt input-icon"></i>
                                <select id="userType" name="userType" required>
                                    <option value="">Select your role</option>
                                    <option value="L1" selected>L1(Super User)</option>
                                    <option value="L2">L2</option>
                                    <option value="L3">L3</option>
                                    <option value="L4">L4</option>
                                </select>
                                <i class="fas fa-chevron-down select-arrow"></i>
                            </div>
                        </div>

                        <button type="submit" class="signin-btn">
                            Sign In
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script>
        /*
        ===========================================
        AUTHENTICATION SYSTEM
        ===========================================
        
        This script handles user authentication for the AWWA Family Management System.
        It validates user credentials and redirects to the appropriate dashboard.
        
        USER ROLES:
        - admin: Full system access (Commanding Officers, Battalion Command)
        - L1: Super User level access
        - L2: Standard user access
        - L3: Limited user access  
        - L4: Basic user access
        
        CREDENTIALS STRUCTURE:
        Each user object contains:
        - userId: Unique identifier
        - password: Authentication password
        - userType: Role level (admin, L1-L4)
        - name: Display name
        - designation: Military rank/position
        - phone: Contact number
        */
        
        // ===========================================
        // USER CREDENTIALS DATABASE
        // ===========================================
        // This array contains all valid user credentials for the AWWA system.
        // Each user object includes authentication data and profile information.
        // The system supports different user types (L1-L4, admin) with role-based access.
        
        const validUsers = [
            // ===========================================
            // UNIT RANKING USERS (4 MAIN USERS)
            // ===========================================
            // These are the primary users of the system with specific roles and responsibilities.
            
            { 
                // Commanding Officer - Highest authority in the unit
                userId: 'tarunpreet singh', 
                password: 'admin123', 
                userType: 'L1', 
                name: 'Col Tarunpreet Singh', 
                designation: 'Commanding Officer', 
                phone: '9650300475',
                hasSpouse: true,  // Only user with spouse information
                spouse: {
                    name: 'Mrs. Deepkiran Kaur',
                    email: 'deepkirankaur23@gmail.com',
                    phone: '7052615743',
                    relationship: 'Spouse'
                }
            },
            { 
                // Second in Command - Deputy to Commanding Officer
                userId: 'piyush sharma', 
                password: 'admin123', 
                userType: 'L1', 
                name: 'Lt Col Piyush Sharma', 
                designation: 'Second in Command', 
                phone: '9797719357',
                hasSpouse: false  // No spouse information available
            },
            { 
                // Adjutant - Administrative officer
                userId: 'harish kumar', 
                password: 'admin123', 
                userType: 'L1', 
                name: 'Maj Harish Kumar', 
                designation: 'Adjutant', 
                phone: '9256172418',
                hasSpouse: false  // No spouse information available
            },
            { 
                // OIC Tech Cell - Officer in Charge of Technical Cell
                userId: 'rahul t more', 
                password: 'admin123', 
                userType: 'L1', 
                name: 'Lt Col Rahul T More', 
                designation: 'OIC Tech Cell', 
                phone: '7006216984',
                hasSpouse: false  // No spouse information available
            },
            
            // ===========================================
            // ADDITIONAL SYSTEM USERS
            // ===========================================
            // These users provide additional access levels and testing capabilities.
            
            // System Administrator - Full system access
            { userId: 'admin', password: 'admin123', userType: 'admin', name: 'Administrator', designation: 'System Admin', phone: '0000000000', hasSpouse: false },
            
            // Battalion Command - High-level administrative access
            { userId: 'bt01', password: 'admin123', userType: 'admin', name: 'Sushma Bhatti', designation: 'Battalion Command', phone: '9087654321', hasSpouse: false },
            
            // ===========================================
            // ROLE-BASED TEST USERS
            // ===========================================
            // These users represent different access levels for testing and development.
            
            // L1 Level Users - Super User access
            { userId: 'aditi', password: 'admin123', userType: 'L1', name: 'Aditi Mehra', designation: 'L1 User', phone: '9876543210', hasSpouse: false },
            { userId: 'user1', password: 'admin123', userType: 'L1', name: 'User One', designation: 'L1 Officer', phone: '9876543211', hasSpouse: false },
            { userId: 'test', password: 'admin123', userType: 'L1', name: 'Test User', designation: 'L1 Staff', phone: '9876543212', hasSpouse: false },
            
            // L2 Level Users - Standard access
            { userId: 'user2', password: 'admin123', userType: 'L2', name: 'User Two', designation: 'L2 Officer', phone: '9876543213', hasSpouse: false },
            
            // L3 Level Users - Limited access
            { userId: 'user3', password: 'admin123', userType: 'L3', name: 'User Three', designation: 'L3 Officer', phone: '9876543214', hasSpouse: false },
            
            // L4 Level Users - Basic access
            { userId: 'user4', password: 'admin123', userType: 'L4', name: 'User Four', designation: 'L4 Officer', phone: '9876543215', hasSpouse: false }
        ];

        // ===========================================
        // LOGIN FORM SUBMISSION HANDLER
        // ===========================================
        // This function handles the login form submission and validates user credentials.
        // It implements a two-tier authentication system for flexibility.
        
        document.querySelector('.login-form').addEventListener('submit', function (e) {
            // Prevent default form submission behavior
            e.preventDefault();
            
            // ===========================================
            // EXTRACT FORM DATA
            // ===========================================
            // Get user input from the login form fields
            const userId = document.getElementById('userId').value.trim();
            const password = document.getElementById('password').value;
            const userType = document.getElementById('userType').value;

            // Log login attempt for debugging purposes
            console.log('Login attempt:', { userId, password, userType });
            
            // ===========================================
            // AUTHENTICATION LOGIC
            // ===========================================
            // Two-tier authentication system:
            // 1. First try exact match (userId + password + userType)
            // 2. If no exact match, try flexible match (userId + password only)
            
            // TIER 1: Exact match with userType
            // This ensures strict role-based authentication
            let match = validUsers.find(u => 
                u.userId === userId && 
                u.password === password && 
                u.userType === userType
            );
            
            // TIER 2: Flexible match (fallback)
            // This allows users to login with any valid credentials and selected role
            if (!match) {
                match = validUsers.find(u => 
                    u.userId === userId && 
                    u.password === password
                );
                
                // If flexible match found, update userType to selected role
                if (match) {
                    match = { ...match, userType: userType };
                }
            }
            
            // ===========================================
            // LOGIN SUCCESS HANDLING
            // ===========================================
            console.log('Match found:', match);
            if (match) {
                // Store complete user session information in localStorage
                // This data will be used by the dashboard to personalize the experience
                localStorage.setItem('userInfo', JSON.stringify({ 
                    userId: match.userId,           // Unique user identifier
                    name: match.name,               // Display name for welcome message
                    userType: match.userType,       // User role/access level
                    designation: match.designation, // Military rank/position
                    phone: match.phone,             // Contact number
                    hasSpouse: match.hasSpouse || false,  // Flag for spouse information display
                    spouse: match.spouse || null    // Spouse data (only for certain users)
                }));
                
                console.log('Login successful, redirecting...');
                alert('Login successful! Redirecting to dashboard...');
                
                // Redirect to the main dashboard
                // All users go to the same dashboard but see personalized content
                window.location.href = 'dashboard_super user.html';
            } else {
                // ===========================================
                // LOGIN FAILURE HANDLING
                // ===========================================
                // Display helpful error message with valid credentials
                alert('Invalid credentials.\n\nUnit Ranking Users:\n- tarunpreet singh / admin123 / L1\n- piyush sharma / admin123 / L1\n- harish kumar / admin123 / L1\n- rahul t more / admin123 / L1\n\nOther Users:\n- admin / admin123 / admin\n- aditi / admin123 / L1\n- user1 / admin123 / L1');
            }
        });
    </script>
    
</body>
</html>
